{{define "content"}}
<h2>Select Payment Method</h2>
<p>Choose which cryptocurrency you want to use for payment:</p>

<form action="/payment" method="post" id="coinForm">
  <div class="coin-options">
    {{range $key, $coin := .Coins}}
    <div class="coin-option" onclick="selectCoin('{{$key}}')">
      <h3>{{$coin.Name}}</h3>
      <p>{{$coin.Symbol}}</p>
    </div>
    {{end}}
  </div>

  <input type="hidden" id="coinInput" name="coin" value="">

  <div class="form-group">
    <label for="gb">Amount of Bandwidth (GB):</label>
    <input type="number" id="gb" name="gb" min="1" value="1" required>
  </div>

  <div class="form-group">
    <p>Price: $<span id="price">5.00</span> USD</p>
  </div>

  <button type="submit" id="submitBtn" disabled>Continue to Payment</button>
</form>

<script>
  function selectCoin(coin) {
    document.getElementById('coinInput').value = coin;
    document.getElementById('submitBtn').disabled = false;

    // Highlight selected coin
    const coins = document.querySelectorAll('.coin-option');
    coins.forEach(coinElement => {
      coinElement.style.borderColor = '#ddd';
      coinElement.style.backgroundColor = '#fff';
    });

    event.currentTarget.style.borderColor = '#3498db';
    event.currentTarget.style.backgroundColor = '#f0f9ff';
  }

  document.getElementById('gb').addEventListener('input', function() {
    const gb = parseInt(this.value) || 0;
    const pricePerGB = 5.0;
    const totalPrice = (gb * pricePerGB).toFixed(2);
    document.getElementById('price').textContent = totalPrice;
  });
</script>
{{end}}